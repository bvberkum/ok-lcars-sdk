_parts:
  range-input: &range-input
    'script':
    - '|': |
          let rootid = 'rootpane'
          function update_all() {
            for (spec in specs) {
              update_value(rootid, specs[spec][0]);
            }
          }
          function update_value(id) {
            let root = $('#'+rootid)
            $('#'+id+'-orig').text(getComputedStyle(root.get(0)).getPropertyValue('--'+id))
          }
          function initialize_range(id, min, max, unit="px", step=1) {
            let el = $('#'+id)

            el.attr('value', "15")
            el.attr('step', "1")
            el.attr('min', "0")
            el.attr('max', "100")
            el.css('--slider-percent', "15")

            let root = $('#'+rootid)
            //let val = root.css('--'+id)
            //if (!val.endsWith(unit)) {
            //  console.error("Invalid unit for", id);
            //  return
            //}
            //el.attr('value', val.slice(0, 0-unit.length));
            update_value(id);

            el.on('input', function(e) {
              let strval = String(e.target.value)
              $(e.target).css('--slider-percent', strval)

              strval = String( e.target.value * max / 100 )+unit
              $('#'+id+'-value').attr('value', strval)
              root.css('--'+id, strval)

              update_all(id);
            });
          }
          function initialize_ranges(_specs) {
            specs = _specs
            for (spec in specs) {
              initialize_range.apply(null, specs[spec]);
            }
          }
  disable-lcarssdk-style: &disable-lcarssdk-style
    a:
        class: "button bg-cat-1-1"
        data-label: "disable"
        href: javascript:(function(){document.getElementById('lcarssdk').disabled=!(document.getElementById('lcarssdk').disabled || false);})()
